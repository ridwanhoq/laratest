## Need to remember
* If order quantity changed of a daily customer need to close previous order and create new order with new quantity



PDOException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'unit_price' cannot be null in D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php:526
Stack trace:
#0 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php(526): PDOStatement->execute()
#1 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php(705): Illuminate\Database\Connection->Illuminate\Database\{closure}('insert into `or...', Array)
#2 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php(672): Illuminate\Database\Connection->runQueryCallback('insert into `or...', Array, Object(Closure))
#3 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php(533): Illuminate\Database\Connection->run('insert into `or...', Array, Object(Closure))
#4 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Query\Builder.php(3148): Illuminate\Database\Connection->affectingStatement('insert into `or...', Array)
#5 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php(949): Illuminate\Database\Query\Builder->upsert(Array, Array, Array)
#6 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Support\Traits\ForwardsCalls.php(23): Illuminate\Database\Eloquent\Builder->upsert(Array, Array)
#7 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php(2132): Illuminate\Database\Eloquent\Model->forwardCallTo(Object(Illuminate\Database\Eloquent\Builder), 'upsert', Array)
#8 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php(2144): Illuminate\Database\Eloquent\Model->__call('upsert', Array)
#9 D:\xampp\htdocs\laratest\app\Jobs\OrderDetailsCreateJob.php(64): Illuminate\Database\Eloquent\Model::__callStatic('upsert', Array)
#10 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(36): App\Jobs\OrderDetailsCreateJob->handle()
#11 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Util.php(40): Illuminate\Container\BoundMethod::Illuminate\Container\{closure}()
#12 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(93): Illuminate\Container\Util::unwrapIfClosure(Object(Closure))
#13 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(37): Illuminate\Container\BoundMethod::callBoundMethod(Object(Illuminate\Foundation\Application), Array, Object(Closure))
#14 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Container.php(653): Illuminate\Container\BoundMethod::call(Object(Illuminate\Foundation\Application), Array, Array, NULL)
#15 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Bus\Dispatcher.php(128): Illuminate\Container\Container->call(Array)
#16 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(128): Illuminate\Bus\Dispatcher->Illuminate\Bus\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#17 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(103): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#18 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Bus\Dispatcher.php(132): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\CallQueuedHandler.php(120): Illuminate\Bus\Dispatcher->dispatchNow(Object(App\Jobs\OrderDetailsCreateJob), false)
#20 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(128): Illuminate\Queue\CallQueuedHandler->Illuminate\Queue\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#21 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(103): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#22 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\CallQueuedHandler.php(122): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#23 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\CallQueuedHandler.php(70): Illuminate\Queue\CallQueuedHandler->dispatchThroughMiddleware(Object(Illuminate\Queue\Jobs\DatabaseJob), Object(App\Jobs\OrderDetailsCreateJob))
#24 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Jobs\Job.php(98): Illuminate\Queue\CallQueuedHandler->call(Object(Illuminate\Queue\Jobs\DatabaseJob), Array)
#25 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Worker.php(428): Illuminate\Queue\Jobs\Job->fire()
#26 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Worker.php(378): Illuminate\Queue\Worker->process('database', Object(Illuminate\Queue\Jobs\DatabaseJob), Object(Illuminate\Queue\WorkerOptions))
#27 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Worker.php(172): Illuminate\Queue\Worker->runJob(Object(Illuminate\Queue\Jobs\DatabaseJob), 'database', Object(Illuminate\Queue\WorkerOptions))
#28 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Console\WorkCommand.php(117): Illuminate\Queue\Worker->daemon('database', 'default', Object(Illuminate\Queue\WorkerOptions))
#29 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Console\WorkCommand.php(101): Illuminate\Queue\Console\WorkCommand->runWorker('database', 'default')
#30 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(36): Illuminate\Queue\Console\WorkCommand->handle()
#31 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Util.php(40): Illuminate\Container\BoundMethod::Illuminate\Container\{closure}()
#32 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(93): Illuminate\Container\Util::unwrapIfClosure(Object(Closure))
#33 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(37): Illuminate\Container\BoundMethod::callBoundMethod(Object(Illuminate\Foundation\Application), Array, Object(Closure))
#34 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Container.php(653): Illuminate\Container\BoundMethod::call(Object(Illuminate\Foundation\Application), Array, Array, NULL)
#35 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Console\Command.php(136): Illuminate\Container\Container->call(Array)
#36 D:\xampp\htdocs\laratest\vendor\symfony\console\Command\Command.php(298): Illuminate\Console\Command->execute(Object(Symfony\Component\Console\Input\ArgvInput), Object(Illuminate\Console\OutputStyle))
#37 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Console\Command.php(121): Symfony\Component\Console\Command\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Illuminate\Console\OutputStyle))
#38 D:\xampp\htdocs\laratest\vendor\symfony\console\Application.php(1040): Illuminate\Console\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#39 D:\xampp\htdocs\laratest\vendor\symfony\console\Application.php(301): Symfony\Component\Console\Application->doRunCommand(Object(Illuminate\Queue\Console\WorkCommand), Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#40 D:\xampp\htdocs\laratest\vendor\symfony\console\Application.php(171): Symfony\Component\Console\Application->doRun(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#41 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Console\Application.php(94): Symfony\Component\Console\Application->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#42 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Foundation\Console\Kernel.php(129): Illuminate\Console\Application->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#43 D:\xampp\htdocs\laratest\artisan(37): Illuminate\Foundation\Console\Kernel->handle(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#44 {main}

Next Illuminate\Database\QueryException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'unit_price' cannot be null (SQL: insert into `order_details` (`created_at`, `date`, `order_id`, `product_id`, `quantity`, `unit_price`, `updated_at`) values (2023-10-23 09:38:27, 2023-10-02 00:00:00, 1, 5, 17.00, ?, 2023-10-23 09:38:27), (2023-10-23 09:38:27, 2023-10-02 00:00:00, 1, 4, 12.00, ?, 2023-10-23 09:38:27), (2023-10-23 09:38:27, 2023-10-02 00:00:00, 2, 3, 17.00, ?, 2023-10-23 09:38:27), (2023-10-23 09:38:27, 2023-10-02 00:00:00, 2, 4, 16.00, ?, 2023-10-23 09:38:27) on duplicate key update `order_id` = values(`order_id`), `product_id` = values(`product_id`), `date` = values(`date`), `unit_price` = values(`unit_price`), `quantity` = values(`quantity`), `updated_at` = values(`updated_at`)) in D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php:712
Stack trace:
#0 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php(672): Illuminate\Database\Connection->runQueryCallback('insert into `or...', Array, Object(Closure))
#1 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Connection.php(533): Illuminate\Database\Connection->run('insert into `or...', Array, Object(Closure))
#2 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Query\Builder.php(3148): Illuminate\Database\Connection->affectingStatement('insert into `or...', Array)
#3 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php(949): Illuminate\Database\Query\Builder->upsert(Array, Array, Array)
#4 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Support\Traits\ForwardsCalls.php(23): Illuminate\Database\Eloquent\Builder->upsert(Array, Array)
#5 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php(2132): Illuminate\Database\Eloquent\Model->forwardCallTo(Object(Illuminate\Database\Eloquent\Builder), 'upsert', Array)
#6 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php(2144): Illuminate\Database\Eloquent\Model->__call('upsert', Array)
#7 D:\xampp\htdocs\laratest\app\Jobs\OrderDetailsCreateJob.php(64): Illuminate\Database\Eloquent\Model::__callStatic('upsert', Array)
#8 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(36): App\Jobs\OrderDetailsCreateJob->handle()
#9 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Util.php(40): Illuminate\Container\BoundMethod::Illuminate\Container\{closure}()
#10 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(93): Illuminate\Container\Util::unwrapIfClosure(Object(Closure))
#11 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(37): Illuminate\Container\BoundMethod::callBoundMethod(Object(Illuminate\Foundation\Application), Array, Object(Closure))
#12 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Container.php(653): Illuminate\Container\BoundMethod::call(Object(Illuminate\Foundation\Application), Array, Array, NULL)
#13 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Bus\Dispatcher.php(128): Illuminate\Container\Container->call(Array)
#14 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(128): Illuminate\Bus\Dispatcher->Illuminate\Bus\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#15 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(103): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#16 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Bus\Dispatcher.php(132): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#17 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\CallQueuedHandler.php(120): Illuminate\Bus\Dispatcher->dispatchNow(Object(App\Jobs\OrderDetailsCreateJob), false)
#18 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(128): Illuminate\Queue\CallQueuedHandler->Illuminate\Queue\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#19 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(103): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(App\Jobs\OrderDetailsCreateJob))
#20 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\CallQueuedHandler.php(122): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\CallQueuedHandler.php(70): Illuminate\Queue\CallQueuedHandler->dispatchThroughMiddleware(Object(Illuminate\Queue\Jobs\DatabaseJob), Object(App\Jobs\OrderDetailsCreateJob))
#22 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Jobs\Job.php(98): Illuminate\Queue\CallQueuedHandler->call(Object(Illuminate\Queue\Jobs\DatabaseJob), Array)
#23 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Worker.php(428): Illuminate\Queue\Jobs\Job->fire()
#24 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Worker.php(378): Illuminate\Queue\Worker->process('database', Object(Illuminate\Queue\Jobs\DatabaseJob), Object(Illuminate\Queue\WorkerOptions))
#25 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Worker.php(172): Illuminate\Queue\Worker->runJob(Object(Illuminate\Queue\Jobs\DatabaseJob), 'database', Object(Illuminate\Queue\WorkerOptions))
#26 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Console\WorkCommand.php(117): Illuminate\Queue\Worker->daemon('database', 'default', Object(Illuminate\Queue\WorkerOptions))
#27 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Queue\Console\WorkCommand.php(101): Illuminate\Queue\Console\WorkCommand->runWorker('database', 'default')
#28 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(36): Illuminate\Queue\Console\WorkCommand->handle()
#29 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Util.php(40): Illuminate\Container\BoundMethod::Illuminate\Container\{closure}()
#30 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(93): Illuminate\Container\Util::unwrapIfClosure(Object(Closure))
#31 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\BoundMethod.php(37): Illuminate\Container\BoundMethod::callBoundMethod(Object(Illuminate\Foundation\Application), Array, Object(Closure))
#32 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Container\Container.php(653): Illuminate\Container\BoundMethod::call(Object(Illuminate\Foundation\Application), Array, Array, NULL)
#33 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Console\Command.php(136): Illuminate\Container\Container->call(Array)
#34 D:\xampp\htdocs\laratest\vendor\symfony\console\Command\Command.php(298): Illuminate\Console\Command->execute(Object(Symfony\Component\Console\Input\ArgvInput), Object(Illuminate\Console\OutputStyle))
#35 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Console\Command.php(121): Symfony\Component\Console\Command\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Illuminate\Console\OutputStyle))
#36 D:\xampp\htdocs\laratest\vendor\symfony\console\Application.php(1040): Illuminate\Console\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#37 D:\xampp\htdocs\laratest\vendor\symfony\console\Application.php(301): Symfony\Component\Console\Application->doRunCommand(Object(Illuminate\Queue\Console\WorkCommand), Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#38 D:\xampp\htdocs\laratest\vendor\symfony\console\Application.php(171): Symfony\Component\Console\Application->doRun(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#39 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Console\Application.php(94): Symfony\Component\Console\Application->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#40 D:\xampp\htdocs\laratest\vendor\laravel\framework\src\Illuminate\Foundation\Console\Kernel.php(129): Illuminate\Console\Application->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#41 D:\xampp\htdocs\laratest\artisan(37): Illuminate\Foundation\Console\Kernel->handle(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#42 {main}